<html>
  <head>
    <title>Admin lex definition</title>    
    <style>
      tr.selected {
      background-color: #FFCF8B
      }      
      .hovable:hover  {
      background: #c7d4dd
      }
    </style>
    
  </head>
  <body>
    <h1>Admin lex definition</h1>

    <table>
      <thead>
	<tr>
	  <td>Name</td>
	  <td>SymbolSet Name</td>
	  <td>Update names</td>
	  <td>Delete lexicon</td>
	</tr>
      </thead>
      <tfoot>
	<tr>
	  <td>
	    <input data-bind="value: $root.addLexiconName"></input>
	  </td>
	  <td>
	    <input data-bind="value: $root.addSymbolSetName"></input>
	  </td>
	  <td>
	    <button data-bind="click: $root.addLexicon">Add lexicon</button>
	  </td>
	  <td></td>
	</tr>
      </tfoot>
      <tbody data-bind="foreach: lexicons"> 
	
	<tr class="selectable" data-bind="click: $root.selectedLexicon">
	  
	  <td>
	    <input data-bind="value: name"></input>
	  </td>
	  
	  <td>
	    <input data-bind="value: symbolSetName"></input>
	  </td>
	  
	  <td>
	    <!-- TODO update also symbol sets, selected lexicon, etc -->
	    <button data-bind="click: $root.updateLexicon">Update</button>
	  </td>
	   
	  <td>
	    <button data-bind="click: $root.deleteLexicon">Delete from db</button>
	  </td>
	</tr>
	
      </tbody> 
    </table>
    
    <p>
      Import lexicon file: <input type="file" data-bind="event: { change: function() { $root.uploadLexiconFile($element.files[0]) } }"></input>
      <button>Load lexicon file into database</button>
    </p>
    
    <span data-bind="if: $root.selectedLexicon().id > 0">
      <p>Selected lexicon:<span  data-bind="text: $root.selectedLexicon().name"></span></p>
      
      <p>Symbol set name: 
	<span  data-bind="text: $root.selectedLexicon().symbolSetName"></span>
	Import: <input type="file" data-bind="event: { change: function() { $root.readSymbolSetFile($element.files[0]) } }"></input>
      </p>
    </span>
    
    <!-- Table for editing the symbol set -->
    <span data-bind="if: $root.selectedLexicon().id > 0">
    <table>
      <thead>
	<tr>
	  <td>Symbol</td>
	  <td>Category</td>
	  <td>Description</td>
	  <td>IPA</td>
	  <td></td> <!-- 'Delete' button -->
	</tr>
      </thead>
      <tfoot>
	<tr>
	  <td>
	    <input data-bind="value: $root.symbolToAdd"></input>
	  </td>
	  <td>
	    <select data-bind="options: $root.symbolCategories, value: $root.categoryToAdd"></select>
	  </td>
	  <td>
	    <input data-bind="value: $root.descriptionToAdd"></input>
	  </td>
	  <td>
	    <label  data-bind="text: $root.ipaToAdd"></label>
	  </td>
	  <td>
	    <button data-bind="click: $root.addSymbol">Add symbol</button>
	  </td>
	  <td></td> <!-- place holder for 'delete' -->
	</tr>
      </tfoot>
      <!-- The actual symbol set -->
      <tbody data-bind="foreach: selectedSymbolSet">
	<tr class="selectable" data-bind="click: $root.setSelectedSymbol">
	  <td>
	    <input data-bind="value: symbol"></input>
	  </td>
	  
	  <td>
	    <select data-bind="options: $root.symbolCategories, value: category"></select> 
	  </td>
	  
	  <td>
	    <input data-bind="value: description"></input>
	  </td>
	  
	  <!-- <td data-bind="text: ipa, click: $root.selectNewIPASymbol"></td> -->
	  <td>
	    <select data-bind="options: $root.ipaSymbols, value: ipa">
	  </td>
	  
	  <td>
	    <button data-bind="click: $root.deleteSymbol">Delete</button>
	  </td>
	</tr>	
      </tbody>
    </table>
    
    <p>
      <button data-bind="click: saveSymbolSetToDB">Save symbol set</button>
    </p>
</span>

    <!-- table for selecting an IPA symbol -->
    <span data-bind="if: $root.selectedLexicon().id > 0">
      <table data-bind="foreach: $root.ipaTableRows">
	<tr data-bind="foreach: $data">
	  <td class="hovable" data-bind="click: $root.setSelectedIPA, text: $data.symbol, attr: {title: $data.description}" style="cursor:pointer"></td>
	</tr>
      </table>
      
      <p>
	Selected symbol: <span data-bind="text: $root.ipaToAdd"></span>
      </p>
    </span>
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-3.4.0.js"></script>

    <script type="text/javascript" src="static/admin_lex_definition.js"></script>
    
    
    <script type="text/javascript" src="static/linereader.js"></script>
  </body>
</html>
