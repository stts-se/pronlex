<html>
  <head>
    <title>Admin lex definition</title>    
    <style>
      tr.selected {
      background-color: #FFCF8B
      }

      
      .hovable:hover  {
      background: #c7d4dd
      }

    </style>
    
  </head>
  <body>
    <h1>Admin lex definition</h1>

    
  

    
    <table>
      <thead>
	<tr>
	  <!-- <td>Id</td> -->
	  <td>Name</td>
	  <td>SymbolSet Name</td>
	  <td>Import</td>
	  <td>Select lexicon</td>
	</tr>
      </thead>
      <tfoot>
	<tr>
	  <td>
	    <input/>
	  </td>
	  <td>
	    <input/>
	  </td>
	  <td>
	    <button>Add lexicon</button>
	  </td>
	  <td></td>
	</tr>
      </tfoot>
      <tbody data-bind="foreach: lexicons"> 
	
	<tr class="selectable">
	  <!-- <td data-bind="text: id"></td> -->
	  
	  <td data-bind="text: name"></td>
	  
	  <td data-bind="text: symbolSetName"></td>
	  
	  <td><input id="xapa" type="file" onchange="$root.readLexiconFile(this.files[0])"></input></td>
	  
	  <td><button data-bind="click: $root.showSymbolSet">Show symbol set</button></td>
	  <!-- <td><button data-bind="click: $root.importLexiconFile">Import lexicon file</button></td> -->

	</tr>
	
      </tbody>
      
    </table>
    
    <p>Lines read: <span style="text-align:right" data-bind="text: $root.nRead"></span></p>
    
    <p>Selected lexicon: <span data-bind="if: $root.selectedLexicon"><span  data-bind="text: $root.selectedLexicon().name"></span></span> </p>
    <p>Symbol set name: 
      <span data-bind="if: $root.selectedLexicon">
	<span  data-bind="text: $root.selectedLexicon().symbolSetName"></span>
	Import: <input type="file" data-bind="event: { change: function() { $root.readSymbolSetFile($element.files[0]) } }"></input>
      </span> 
    </p>

    
    <!-- Table for editing the symbol set -->
    <table data-bind="if: $root.selectedSymbolSet">
      <thead>
	<tr>
	  <td>Symbol</td>
	  <td>Category</td>
	  <td>Description</td>
	  <td>IPA</td>
	  <td></td>
	</tr>
      </thead>
      <tfoot>
	<tr>
	  <td>
	    <input></input>
	  </td>
	  <td>
	    <select data-bind="options: $root.symbolCategories"></select>
	  </td>
	  <td>
	    <input data-bind="value: $root.selectedIPA().description"></input>
	  </td>
	  <td>
	    <label  data-bind="text: $root.selectedIPA().symbol"></label>
	  </td>
	  <td>
	    <button data-bind="click: $root.addSymbol">Add</button>
	  </td>
	</tr>
      </tfoot>
      <!-- The actual symbol set -->
      <tbody data-bind="foreach: selectedSymbolSet">
	<tr class="selectable" data-bind="click: $root.setSelectedSymbol">
	  <td>
	    <input data-bind="value: symbol"></input>
	  </td>
	  
	  <td>
	    <select data-bind="options: $root.symbolCategories, value: category"></select> 
	  </td>
	  
	  <td>
	    <input data-bind="value: description"></input>
	  </td>
	  
	  <!-- <td data-bind="text: ipa, click: $root.selectNewIPASymbol"></td> -->
	  <td>
	    <select data-bind="options: $root.ipaSymbols, value: ipa">
	  </td>
	</Tr>	
      </tbody>
    </table>
    
    <p>
      <button data-bind="click: saveSymbolSetToDB">Save symbol set</button>
    </p>
    
    <!-- table for selecting an IPA symbol -->
    <table data-bind="foreach: $root.ipaTableRows">
      <tr data-bind="foreach: $data">
	<td class="hovable" data-bind="click: $root.setSelectedIPA, text: $data.symbol, attr: {title: $data.description}" style="cursor:pointer"></td>
      </tr>
    </table>
    
    <p>
      Selected symbol: <span data-bind="text: $root.selectedIPA().symbol"></span>
    </p>
    
    
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-3.4.0.js"></script>

    <script type="text/javascript" src="static/admin_lex_definition.js"></script>
    
    <script type="text/javascript" src="static/linereader.js"></script>
  </body>
</html>
